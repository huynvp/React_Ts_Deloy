{"version":3,"file":"static/js/376.8a4da02a.chunk.js","mappings":"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","sources":["components/tool/task/sprintManage/DetailComponent.tsx"],"sourcesContent":["import { Col, Drawer, Form, Row } from \"antd\";\nimport moment from \"moment\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport Swal from \"sweetalert2\";\nimport { Fn } from \"../../../../helper/function\";\nimport { TaskSprintManageService } from \"../../../../services/taskService\";\nimport { MyFormItem } from \"../../../core/Input\";\nimport { MyButton } from \"../../../core/MyButton\";\nimport { ProjectStatusComponent } from \"../ProjectStatusComponent\";\n\nexport default function ModifyComponent(props: any) {\n    const [name, setName] = useState('');\n    const [dateFrom, setDateFrom] = useState(moment());\n    const [dateTo, setDateTo] = useState(moment());\n    const [status, setStatus] = useState();\n    const { setIsLoading } = props;\n\n    let loadData = useCallback(() => {\n        if (props.keyData !== undefined) {\n            setIsLoading(true);\n            TaskSprintManageService.GetDetail(props.projectKey, props.keyData, (data: any) => {\n                let row = data.data.data;\n                setName(row.name);\n                setDateFrom(moment(row.dateFrom));\n                setDateTo(moment(row.dateTo));\n                setStatus(row.status);\n            }, undefined, () => {\n                setIsLoading(false);\n            })\n        }\n    }, [props.projectKey, props.keyData, setIsLoading])\n\n    useEffect(() => {\n        loadData();\n    }, [loadData]);\n\n    function HandleOnClose() {\n        props.setVisible(false);\n        setName('');\n        setDateFrom(moment());\n        setDateTo(moment());\n\n        if (props.setKeyData !== undefined) {\n            props.setKeyData(undefined);\n        }\n    }\n\n    function HandleSubmitForm() {\n        let body = {\n            name: name,\n            dateFrom: dateFrom.format(\"yyyy-MM-DD\"),\n            dateTo: dateTo.format(\"yyyy-MM-DD\"),\n            status: status\n        };\n\n        setIsLoading(true);\n\n        if (props.keyData !== undefined) {\n            Edit(body);\n        } else {\n            Add(body);\n        }\n    }\n\n    function Add(body: any) {\n        TaskSprintManageService.Add(props.projectKey, body, (data: any) => {\n            Fn.PrintMsgSuccess(data);\n            HandleOnClose();\n            props.loadData();\n        }, () => {\n            props.setIsLoading(false)\n        });\n    }\n\n    function Edit(body: any) {\n        TaskSprintManageService.GetDetail(props.projectKey, props.keyData, (data: any) => {\n            body = Fn.GetTimestamp(data, body);\n            TaskSprintManageService.Edit(props.projectKey, props.keyData, body, (data: any) => {\n                Fn.PrintMsgSuccess(data);\n                HandleOnClose();\n                props.loadData();\n            }, () => {\n                props.setIsLoading(false)\n            });\n        }, () => {\n            props.setIsLoading(false)\n        });\n    }\n\n    function handleDeleteSprint() {\n        Swal.fire({\n            title: \"Xác nhận xóa\",\n            text: \"Bạn có muốn xóa sprint này không?\",\n            showDenyButton: true,\n            confirmButtonText: \"Có\",\n            denyButtonText: \"Không\",\n        }).then((result: any) => {\n            if (result.isConfirmed) {\n                doDeleteSprint()\n            }\n        })\n    }\n\n    function doDeleteSprint() {\n        props.setIsLoading(true);\n        TaskSprintManageService.GetDetail(props.projectKey, props.keyData, (data: any) => {\n            TaskSprintManageService.Delete(props.projectKey, props.keyData, Fn.GetTimestamp(data), (data: any) => {\n                Fn.PrintMsgSuccess(data);\n                HandleOnClose();\n                props.loadData();\n            }, () => {\n                props.setIsLoading(false);\n            });\n        }, () => {\n            props.setIsLoading(false);\n        })\n    }\n\n    return (\n        <Drawer\n            title=\"Chi tiết\"\n            open={props.visible}\n            onClose={HandleOnClose}>\n\n            <Form layout=\"vertical\" onSubmitCapture={HandleSubmitForm}>\n                <MyFormItem.Input\n                    label=\"Tên giai đoạn\"\n                    value={name}\n                    setValue={setName} />\n\n                <MyFormItem.DatePicker\n                    label=\"Ngày bắt đầu\"\n                    value={dateFrom}\n                    setValue={setDateFrom} />\n\n                <MyFormItem.DatePicker\n                    label=\"Ngày kết thúc\"\n                    value={dateTo}\n                    setValue={setDateTo} />\n\n                <ProjectStatusComponent\n                    label=\"Trạng thái\"\n                    projectKey={props.projectKey}\n                    type={2}\n                    value={status}\n                    setValue={setStatus} />\n\n                <Row gutter={24}>\n                    <Col span=\"12\">\n                        <MyButton\n                            isLoading={props.isLoading}\n                            htmlType=\"submit\"\n                            type=\"success\"\n                            value={props.keyData !== undefined ? \"Chỉnh sửa\" : \"Thêm mới\"} />\n                    </Col>\n                    <Col>\n                        <MyButton\n                            isLoading={props.isLoading}\n                            type=\"danger\"\n                            disabled={props.keyData === undefined}\n                            onClick={handleDeleteSprint}\n                            value=\"Xóa sprint\" />\n                    </Col>\n                </Row>\n            </Form>\n        </Drawer>\n    );\n}"],"names":["ModifyComponent","props","useState","name","setName","moment","dateFrom","setDateFrom","dateTo","setDateTo","status","setStatus","setIsLoading","loadData","useCallback","undefined","keyData","TaskSprintManageService","projectKey","data","row","HandleOnClose","setVisible","setKeyData","useEffect","title","open","visible","onClose","layout","onSubmitCapture","body","format","Fn","Edit","Add","label","value","setValue","type","gutter","span","isLoading","htmlType","disabled","onClick","Swal","text","showDenyButton","confirmButtonText","denyButtonText","then","result","isConfirmed"],"sourceRoot":""}